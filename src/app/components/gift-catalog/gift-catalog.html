<div class="catalog-container">
    <h1 class="catalog-title">קטלוג מתנות <span class="highlight">2026</span></h1>

    <div class="controls-container">
        <div class="controls-glass-card">

            <div class="search-section">
                <div class="input-glow-wrapper">
                    <i class="pi pi-search search-icon"></i>
                    <input type="text" pInputText placeholder="חפש מתנה..." [ngModel]="searchTerm()"
                        (ngModelChange)="searchTerm.set($event)" class="modern-search" />
                </div>
            </div>

            <div class="actions-section">
                <p-select [options]="sortOptions" (onChange)="onSortPrice($event)" optionLabel="label"
                    optionValue="value" placeholder="מיין לפי מחיר" class="premium-select">
                </p-select>

                <p-button label="קטגוריות" (onClick)="onSortCategory()" [outlined]="true"
                    class="premium-btn filter-btn">
                </p-button>

                <div class="divider"></div>

                <p-button icon="pi pi-refresh" (onClick)="resetFilters()" [text]="true" class="premium-btn reset-btn"
                    pTooltip="איפוס הגדרות" tooltipPosition="bottom">
                </p-button>
            </div>

        </div>
    </div>

    <div class="gift-grid">
        @for (gift of filteredGifts(); track gift.id) {
        <p-card [header]="gift.name" [subheader]="gift.categoryName" class="gift-card">
            <ng-template pTemplate="header">
                <div class="image-wrapper">
                    <img [alt]="gift.name" [src]="gift.imageUrl || 'assets/default-gift.jpg'" />
                    <p-tag [value]="gift.ticketPrice + ' ₪'" severity="success" class="price-tag"></p-tag>
                </div>
            </ng-template>

            <p class="donor-name">תרומת: {{gift.donorName}}</p>

            <ng-template pTemplate="footer">
                <div class="flex gap-3 mt-1">
                    <p-button label="הוסף לסל" icon="pi pi-shopping-cart" class="w-full"
                        (click)="addToCart(gift)"></p-button>
                </div>
            </ng-template>
        </p-card>
        } @empty {
        <div class="no-results">
            <i class="pi pi-search-minus"></i>
            <p>לא מצאנו מתנות שתואמות לחיפוש של "{{searchTerm()}}"</p>
        </div>
        }
    </div>
</div>
