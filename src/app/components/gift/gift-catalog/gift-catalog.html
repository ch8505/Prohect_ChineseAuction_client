<div class="catalog-container" dir="rtl">
    <header class="catalog-header">
        <h1 class="catalog-title">נבחרת המתנות <span class="highlight">2026</span></h1>
        <p class="catalog-subtitle">הזדמנות נדירה לזכות בפרסים שחלמת עליהם</p>
    </header>

    <div class="controls-container">
        <div class="controls-glass-card">
            <div class="search-section">
                <div class="input-glow-wrapper">
                    <i class="pi pi-search"></i>
                    <input type="text" pInputText placeholder="חפשי את הפרס הבא שלך..." [ngModel]="searchTerm()"
                        (ngModelChange)="searchTerm.set($event)" />
                </div>
            </div>

            <div class="actions-section">
                <p-select [options]="sortOptions" (onChange)="onSortPrice($event)" optionLabel="label"
                    optionValue="value" placeholder="מיון לפי מחיר" class="premium-select">
                </p-select>

                <p-button label="כל הקטגוריות" (onClick)="onSortCategory()" icon="pi pi-filter" class="filter-btn">
                </p-button>

                <div class="divider"></div>

                <p-button icon="pi pi-refresh" (onClick)="resetFilters()" [text]="true" class="reset-icon-btn"
                    pTooltip="איפוס הגדרות" tooltipPosition="bottom">
                </p-button>
            </div>
        </div>
    </div>

    <div class="gift-grid">
        @for (gift of filteredGifts(); track gift.id) {
        <div class="gift-card-wrapper">
            <div class="gift-premium-card">
                <div class="image-section">
                    <img [alt]="gift.name"
                        [src]="gift.imageUrl?.startsWith('http') ? gift.imageUrl : IMAGE_BASE_URL + gift.imageUrl" />
                    <div class="price-overlay">
                        <span class="currency">₪</span>
                        <span class="amount">{{gift.ticketPrice}}</span>
                    </div>
                    <div class="category-tag">{{gift.categoryName}}</div>
                </div>

                <div class="content-section">
                    <h3 class="gift-name">{{gift.name}}</h3>
                    <p class="donor-line">בהוקרה מאת: <span>{{gift.donorName}}</span></p>

                    <div class="card-footer">
                        <button class="cart-btn" (click)="addToCart(gift)">
                            <i class="pi pi-shopping-cart"></i>
                            <span>הבטיחי את מקומך</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        } @empty {
        <div class="empty-state">
            <i class="pi pi-search-minus"></i>
            <p>לא מצאנו בדיוק את מה שחיפשת... נסי חיפוש אחר?</p>
        </div>
        }
    </div>
</div>